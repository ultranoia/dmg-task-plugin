!function(e,t,o,s,n){const{registerBlockType:i}=e,{useBlockProps:r,InspectorControls:l}=t,{createElement:p,Fragment:a,useState:d}=o,{PanelBody:c,TextControl:g,Button:u,Spinner:y}=s,{useSelect:m}=n;i("dmg/read-more-link",{edit:e=>{const{attributes:t,setAttributes:o}=e,{postId:s,postTitle:n,postUrl:i}=t,[h,v]=d(""),[w,b]=d(""),[f,R]=d(1),{posts:S,isResolving:k}=m(e=>{const t=e("core");if(!t)return{posts:[],isResolving:!1};const{getEntityRecords:o,getEntityRecord:s,isResolving:n}=t;if(w){const e=parseInt(w,10);if(!e)return{posts:[],isResolving:!1};const t=s("postType","post",e);return{posts:t?[t]:[],isResolving:!(!n||!n("getEntityRecord",["postType","post",e]))}}const i={per_page:5,page:f,order:"desc",orderby:"date"};return h&&(i.search=h),{posts:o("postType","post",i)||[],isResolving:!(!n||!n("getEntityRecords",["postType","post",i]))}},[h,w,f]),x=r({className:"dmg-read-more"}),T=f>1&&!w,C=!w&&S&&5===S.length,E=S&&S.length?S.map(e=>p("div",{key:e.id,style:{marginBottom:"8px"}},p("div",{style:{fontWeight:"bold"}},e.title&&e.title.rendered?e.title.rendered:"(no title)"),p("div",{style:{fontSize:"12px",opacity:.7,marginBottom:"4px"}},`ID: ${e.id}`),p(u,{isSecondary:!0,onClick:()=>(e=>{o({postId:e.id,postTitle:e.title&&e.title.rendered?e.title.rendered:e.title,postUrl:e.link})})(e)},"Use this post"))):p("p",null,"No posts found.");return p(a,null,p(l,null,p(c,{title:"Select a post",initialOpen:!0},p(g,{label:"Search posts",value:h,onChange:e=>{v(e),b(""),R(1)},help:"Search by post title/content."}),p(g,{label:"Search by Post ID",value:w,onChange:e=>{b(e),v(""),R(1)},help:"Enter a numeric post ID to jump directly."}),!w&&p("div",{style:{margin:"8px 0"}},p(u,{isSecondary:!0,disabled:!T,onClick:()=>T&&R(f-1),style:{marginRight:"4px"}},"Previous"),p(u,{isSecondary:!0,disabled:!C,onClick:()=>C&&R(f+1)},"Next"),p("span",{style:{marginLeft:"8px",fontSize:"12px",opacity:.7}},`Page ${f}`)),k?p(y,null):E)),p("p",x,n&&i?["Read More: ",p("a",{href:i},n)]:"Select a post from the sidebar."))},save:e=>{const{attributes:t}=e,{postTitle:o,postUrl:s}=t;if(!o||!s)return null;const n=r.save({className:"dmg-read-more"});return p("p",n,"Read More: ",p("a",{href:s},o))}})}(window.wp.blocks,window.wp.blockEditor,window.wp.element,window.wp.components,window.wp.data);